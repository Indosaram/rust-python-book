
## ëŸ¬ìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°

### PyO3

PyO3ëŠ” íŒŒì´ì¬ì—ì„œ ëŸ¬ìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , ë°˜ëŒ€ë¡œ ëŸ¬ìŠ¤íŠ¸ì—ì„œ íŒŒì´ì¬ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í¬ë ˆì´íŠ¸ì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” íŒŒì´ì¬ì—ì„œ ëŸ¬ìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œ ë³´ê² ìŠµë‹ˆë‹¤. íŒŒì´ì¬ì—ì„œ ëŸ¬ìŠ¤íŠ¸ ì½”ë“œë¥¼ í˜¸ì¶œí•´ ë†’ì€ ì„±ëŠ¥ í–¥ìƒì„ ë‹¬ì„±í•œ ë‹¤ì–‘í•œ ì˜ˆì‹œê°€ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ê·¸ ì¤‘ ìœ ëª…í•œ ëª‡ ê°€ì§€ íŒ¨í‚¤ì§€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.

- [orjson](https://github.com/ijl/orjson) *Fast Python JSON library* 10ë°°
- [fastuuid](https://github.com/thedrow/fastuuid/) *Python bindings to Rust's UUID library*
- [cryptography](https://github.com/pyca/cryptography) *Python cryptography library with some functionality in Rust*



### maturin

`maturin` is a tool for building and publishing Rust-based Python packages with minimal configuration

```bash
$ pipenv install maturin
$ pipenv shell
```

maturinìœ¼ë¡œ pyo3 í”„ë¡œì íŠ¸ ì‹œì‘

```bash
$ maturin init -b pyo3
âœ” ğŸ¤· What kind of bindings to use? Â· pyo3
  âœ¨ Done! New project created string_sum

```



```
.
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Pipfile
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ src
    â””â”€â”€ lib.rs
```





pyproject cargo tomlíŒŒì¼ ì´ë¦„ ë³€ê²½ í•„ìš”

```toml
[package]
name = "fibonacci"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
[lib]
name = "fibonacci"
crate-type = ["cdylib"]

[dependencies]
pyo3 = { version = "0.16.5", features = ["extension-module"] }
```



```toml
[build-system]
requires = ["maturin>=0.13,<0.14"]
build-backend = "maturin"

[project]
name = "fibonacci"
requires-python = ">=3.7"
classifiers = [
    "Programming Language :: Rust",
    "Programming Language :: Python :: Implementation :: CPython",
    "Programming Language :: Python :: Implementation :: PyPy",
]

```



### ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬ë ˆì´íŠ¸ ë§Œë“¤ê¸°

```rust,ignore
use pyo3::prelude::*;

fn _run(n: u64) -> u64 {
    match n {
        0 => 0,
        1 => 1,
        _ => _run(n - 1) + _run(n - 2),
    }
}

#[pyfunction]
fn run(n: u64) -> PyResult<u64> {
    Ok(_run(n))
}

/// A Python module implemented in Rust.
#[pymodule]
fn fibonacci(_py: Python, m: &PyModule) -> PyResult<()> {
    m.add_function(wrap_pyfunction!(run, m)?)?;
    Ok(())
}

```





ë§Œì¼ ê°€ìƒí™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²½ìš° ì—ëŸ¬ ë°œìƒ

```bash
$ maturin develop
ğŸ’¥ maturin failed
  Caused by: You need to be inside a virtualenv or conda environment to use develop (neither VIRTUAL_ENV nor CONDA_PREFIX are set). See https://virtualenv.pypa.io/en/latest/index.html on how to use virtualenv or use `maturin build` and `pip install <path/to/wheel>` instead.
```

ëŸ¬ìŠ¤íŠ¸ íŒ¨í‚¤ì§€ ë¹Œë“œ í›„ íŒŒì´ì¬ ê°€ìƒí™˜ê²½ì— íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
$ maturin develop      
ğŸ”— Found pyo3 bindings
ğŸ Found CPython 3.8 at /Users/.local/share/virtualenvs/ch14-4UzrGkRt/bin/python
   Compiling pyo3-build-config v0.16.5
   Compiling pyo3-ffi v0.16.5
   Compiling pyo3 v0.16.5
   Compiling fibonacci v0.1.0 (/Users/code/Tutorials/sap_rust_tutorial/ch14)
    Finished dev [unoptimized + debuginfo] target(s) in 12.64s
ğŸ“¦ Built wheel for CPython 3.8 to /var/folders/74/l6jhlmk114g8kx1pzz2s9fm80000gn/T/.tmpBh1Xiw/fibonacci-0.1.0-cp38-cp38-macosx_10_7_x86_64.whl
ğŸ›   Installed fibonacci-0.1.0
```




